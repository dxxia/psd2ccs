# psd2ccs
---

## 用途：
* 解析PSD文件
* 导出图层png文件
* 生成CocosStudio项目json文件

## 环境配置
* python2.7
* 第三方python库：PIL（安装命令：pip install Pillow）

## 项目结构
1. output：脚本导出目录，包含导出的图片和json文件。
2. psd_tools：用于解析psd的库，github上的资源并略作修改。
3. psd2json：json生成脚本；psd2png：图片导出脚本。
4. res：用于放置psd资源和对应配置文件。
5. template：用于放置json生成过程中所需的CocosStudio组件的模版数据（由psd解析出的组件目前只有Panel、ImageView、Label三种）。

## 使用说明
#### 脚本使用方法:
1. 将psd文件放入res目录下，复制一份配置文件（.conf）且命名跟psd名称保持一致，根据个人需求修改配置文件。
2. 调用psd2png脚本导出图片：python psd2png.py psdname (参数为psd名称)。将导出的图片放入合适的CocosStudio项目资源位置，并在步骤1的配置文件中修改对应的搜索路径。
3. 调用psd2json脚本生成json文件：python psd2json.py psdname (参数为psd名称)。将生成的json文件放入CocosStudio项目json位置。
4. 将json配置到CocosStudio项目后即可打开项目看到生成的界面。
5. 根据需要调整组件命名和界面相关设置（是否适应分辨率、背景颜色、相对/绝对布局）。

** 配置文件介绍：**
目前配置有CocosStudio的项目资源根路径和资源搜索路径，目的是定位CocosStudio目录并自动搜索界面所需资源配置到json文件中。资源的搜索根据路径的配置从上到下依次进行，直到搜索到所需资源。

#### 美术PS使用注意：
* 对于可以看作一个整体的对象，注意合并图层为单个图层，且合并特效（比如外发光、阴影...）。
* 图层命名以平时切图格式进行命名，因为脚本会直接使用图层名称作为切图名称（若用到多个相同资源，命名中加空格防止冲突）。
* 因为CocosStudio不支持字体描边编辑，所以需额外标注。
* 因为PS不支持九宫格，九宫格资源需额外切图。
* 列表之类的重复资源不需要都显示出来。
* 保证需要的资源都包含在PSD文件中（可隐藏，但一定要有）。
* 对于直接放置在场景的界面，画布大小应与设计分辨率相同（1136*640）。

## 尚需完善
1. 导出包含特效的图层。psd解析库功能还不够完善，尚无法导出附带特效的图片（如外发光、阴影），因此目前由美术统一合并图层效果。
2. 导出成exe应用。开发都是在windows上进行，且单纯运行脚本的话还需安装相关库，因此打包成exe对于使用更加方便。待测试完成，版本稳定后进行打包。
3. 资源搜索可递归搜索子目录。无需过多配置路径。

